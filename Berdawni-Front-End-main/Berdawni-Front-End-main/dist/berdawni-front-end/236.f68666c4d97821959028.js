(self.webpackChunkberdawni_front_end=self.webpackChunkberdawni_front_end||[]).push([[236],{2236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NewseventscreationModule:()=>F});var i=n(8583),o=n(8307),r=n(6304),s=n(3679),a=n(7263),l=n(7127),d=n(6316),u=n(7716),c=n(8295),p=n(9983),g=n(3220),m=n(2382),f=n(1095),h=n(6627);function w(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ul"),u.TgZ(1,"li"),u._uU(2),u.TgZ(3,"mat-icon",20),u.NdJ("click",function(){return u.CHM(e),u.oxw(2).clear()}),u._uU(4,"close "),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=u.oxw(2);u.xp6(2),u.AsE("",e.uploadedFile.name," - ",e.uploadedFile.size," bytes ")}}function Z(e,t){if(1&e&&u.YNc(0,w,5,2,"ul",17),2&e){const e=u.oxw();u.Q6J("ngIf",e.uploadedFile&&e.isSubmitImg)}}function b(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1,"Main Image is required "),u.qZA())}function v(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li"),u._uU(1),u.TgZ(2,"mat-icon",20),u.NdJ("click",function(){const t=u.CHM(e).index;return u.oxw(3).clear2(t)}),u._uU(3,"close "),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(1),u.AsE("",e.name," - ",e.size," bytes ")}}function _(e,t){if(1&e&&(u.TgZ(0,"ul"),u.YNc(1,v,4,2,"li",21),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.uploadedFiles)}}function x(e,t){if(1&e&&u.YNc(0,_,2,1,"ul",17),2&e){const e=u.oxw();u.Q6J("ngIf",e.uploadedFiles.length)}}const q=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.route=e,this._newsEventsService=t,this._messageService=n,this._Location=i,this.disabledBtn=!1,this.isEdit=!1,this.isSubmitImg=!0,this.uploadedFiles=[],this.news=new d.z}onFileChange(e){}onUpload(e){this.isSubmitImg=!1;for(let t of e.files)this.uploadedFile=t}onRemove(e){this.uploadedFiles.splice(this.uploadedFiles.findIndex(t=>t==e.file),1)}clear(){this.uploadedFile=void 0}clear1(){this.uploadedFiles=[]}clear2(e){this.uploadedFiles.splice(e,1)}onUpload1(e){for(let t of e.files)this.uploadedFiles.push(t)}getNews(){var e=this;return(0,r.Z)(function*(){const t=yield e._newsEventsService.onenews(e.id).toPromise();t.result&&(e.news=t.body)})()}saveNews(){var e=this;return(0,r.Z)(function*(){var t,n;if(null===(t=e.newsForm.get("image"))||void 0===t||t.setErrors(null),e.isEdit||e.uploadedFile){if(e.newsForm.valid)if(e.disabledBtn=!0,e.isEdit){yield e._newsEventsService.updateNews(e.news).toPromise(),e.uploadedFile&&(yield e._newsEventsService.addImage(0,e.uploadedFile,e.id).toPromise());let t=[];e.uploadedFiles&&e.uploadedFiles.length>0&&(yield Promise.all(e.uploadedFiles.map(function(){var n=(0,r.Z)(function*(n){let i=yield e._newsEventsService.addImage(1,n,e.id).toPromise();t.push(i.body.body)});return function(e){return n.apply(this,arguments)}}()))),t&&t.length>0&&(yield e._newsEventsService.updateNewsImages(e.id,t).toPromise()),e._messageService.add({severity:"success",summary:"Success",detail:"Product Updated"}),e._Location.back()}else{const t=yield e._newsEventsService.addNews(e.news).toPromise();if(t.result){e.uploadedFile&&(yield e._newsEventsService.addImage(0,e.uploadedFile,t.body._id).toPromise());let n=[];e.uploadedFiles&&e.uploadedFiles.length>0&&(yield Promise.all(e.uploadedFiles.map(function(){var i=(0,r.Z)(function*(i){let o=yield e._newsEventsService.addImage(1,i,t.body._id).toPromise();n.push(o.body.body)});return function(e){return i.apply(this,arguments)}}()))),n&&n.length>0&&(yield e._newsEventsService.updateNewsImages(t.body._id,n).toPromise())}e._messageService.add({severity:"success",summary:"Success",detail:"Product Added"}),e._Location.back()}}else null===(n=e.newsForm.get("image"))||void 0===n||n.setErrors({error_key:!0})})()}ngOnInit(){var e=this;return(0,r.Z)(function*(){e.newsForm=new s.cw({name:new s.NI("",s.kI.required),description:new s.NI("",s.kI.required),date:new s.NI("",s.kI.required),image:new s.NI("",s.kI.nullValidator),images:new s.NI("",s.kI.nullValidator)}),e.route.snapshot.paramMap.get("id")&&(e.id=e.route.snapshot.paramMap.get("id"),e.isEdit=!0,yield e.getNews(),yield e.createFile())})()}createFile(){var e=this;return(0,r.Z)(function*(){let t=yield fetch(e.news.image.toString()),n=yield t.blob(),i=decodeURI(e.news.image.toString()).split("/")[e.news.image.toString().split("/").length-1];e.uploadedFile=new File([n],i,{type:"image/jpeg"}),e.news.images&&e.news.images.length>0&&e.news.images.map(function(){var t=(0,r.Z)(function*(t){let n=yield fetch(t.toString()),i=yield n.blob(),o=decodeURI(t.toString()).split("/")[e.news.image.toString().split("/").length-1];e.uploadedFiles.push(new File([i],o,{type:"image/jpeg"}))});return function(e){return t.apply(this,arguments)}}())})()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(o.gz),u.Y36(l.m),u.Y36(a.ez),u.Y36(i.Ye))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-newseventscreation"]],features:[u._Bn([l.m,a.ez])],decls:46,vars:12,consts:[[1,"box"],[1,"box2"],[1,"form-",3,"formGroup","ngSubmit"],[1,"form-group","d-flex","justify-content-between"],["appearance","outline"],["matInput","","formControlName","name","required","",3,"ngModel","ngModelChange"],["matInput","","formControlName","date",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","id","description-box",1,"description-full-width"],["matInput","","placeholder","Description","formControlName","description",3,"ngModel","ngModelChange"],[1,"row",2,"margin-top","50px"],[2,"color","#247094","margin-left","5%"],[1,"col","text-center"],["id","main-image",1,"form-group",2,"margin-bottom","20px"],["name","demo[]","required","",3,"multiple","showUploadButton","onClear","onSelect"],["pTemplate","content"],[4,"ngIf"],["name","demo[]",3,"multiple","showUploadButton","onClear","onSelect","onRemove"],["mat-raised-button","","type","submit",1,"btn-submit",3,"disabled"],[2,"cursor","pointer",3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h1"),u._uU(3,"News & Events Creation"),u.qZA(),u.qZA(),u.TgZ(4,"form",2),u.NdJ("ngSubmit",function(){return t.saveNews()}),u.TgZ(5,"div",3),u.TgZ(6,"mat-form-field",4),u.TgZ(7,"mat-label"),u._uU(8,"News/Event Name"),u.qZA(),u.TgZ(9,"input",5),u.NdJ("ngModelChange",function(e){return t.news.name=e}),u.qZA(),u.TgZ(10,"mat-error"),u._uU(11,"News/Event Name is required"),u.qZA(),u.qZA(),u.TgZ(12,"mat-form-field",4),u.TgZ(13,"mat-label"),u._uU(14,"Choose a date"),u.qZA(),u.TgZ(15,"input",6),u.NdJ("ngModelChange",function(e){return t.news.date=e}),u.qZA(),u._UZ(16,"mat-datepicker-toggle",7),u._UZ(17,"mat-datepicker",null,8),u.TgZ(19,"mat-error"),u._uU(20,"Date is required"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"p"),u.TgZ(22,"mat-form-field",9),u.TgZ(23,"mat-label"),u._uU(24,"Description"),u.qZA(),u.TgZ(25,"textarea",10),u.NdJ("ngModelChange",function(e){return t.news.description=e}),u.qZA(),u.TgZ(26,"mat-error"),u._uU(27,"Description is required"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"div",11),u.TgZ(29,"h1",12),u._uU(30,"Main Image:"),u.qZA(),u.TgZ(31,"div",13),u.TgZ(32,"div",14),u.TgZ(33,"p-fileUpload",15),u.NdJ("onClear",function(){return t.clear()})("onSelect",function(e){return t.onUpload(e)}),u.YNc(34,Z,1,1,"ng-template",16),u.qZA(),u.TgZ(35,"div"),u.YNc(36,b,2,0,"mat-error",17),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(37,"div",11),u.TgZ(38,"h1",12),u._uU(39,"Other Images:"),u.qZA(),u.TgZ(40,"div",13),u.TgZ(41,"div",14),u.TgZ(42,"p-fileUpload",18),u.NdJ("onClear",function(){return t.clear1()})("onSelect",function(e){return t.onUpload1(e)})("onRemove",function(e){return t.onRemove(e)}),u.YNc(43,x,1,1,"ng-template",16),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(44,"button",19),u._uU(45,"Submit"),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.MAs(18);u.xp6(4),u.Q6J("formGroup",t.newsForm),u.xp6(5),u.Q6J("ngModel",t.news.name),u.xp6(6),u.Q6J("matDatepicker",e)("ngModel",t.news.date),u.xp6(1),u.Q6J("for",e),u.xp6(9),u.Q6J("ngModel",t.news.description),u.xp6(8),u.Q6J("multiple",!1)("showUploadButton",!1),u.xp6(3),u.Q6J("ngIf",t.newsForm.controls.image.hasError("error_key")),u.xp6(6),u.Q6J("multiple",!0)("showUploadButton",!1),u.xp6(2),u.Q6J("disabled",t.disabledBtn)}},directives:[s._Y,s.JL,s.sg,c.KE,c.hX,p.Nt,s.Fj,s.JJ,s.u,s.Q7,c.TO,g.hl,g.nW,c.R9,g.Mq,m.p,a.jx,i.O5,f.lW,h.Hw,i.sg],styles:[".box[_ngcontent-%COMP%]{width:90%;margin:50px auto;height:auto;padding-bottom:50px;border-radius:20px}.box[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%]{background-color:#fff}.box2[_ngcontent-%COMP%]{border-radius:20px 20px 0 0;padding-top:10px;width:100%;height:90px;border-bottom:5px solid #247094}.box2[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:38%;padding-top:1.5%;color:#194b62;font-weight:400;font-size:25px}.pi-calendar[_ngcontent-%COMP%]{font-size:20px;color:#777575;cursor:pointer;font-weight:600;float:right;margin-right:5%;margin-top:-11%}.pi-calendar[_ngcontent-%COMP%]:hover{color:#3f51b5}#description-box[_ngcontent-%COMP%]{height:100px}.form-[_ngcontent-%COMP%]{margin-top:50px;margin-left:auto;margin-right:auto;width:50%}.description-full-width[_ngcontent-%COMP%]{width:100%}#other-image[_ngcontent-%COMP%]{margin-top:35px}label[_ngcontent-%COMP%]{margin-bottom:10px;color:#353535;font-size:16px;font-weight:500}.btn-submit[_ngcontent-%COMP%]{margin-top:50px;width:100%;height:50px;font-size:20px;color:#fff;background-color:#247094;border-radius:20px}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[o.Bz.forChild(q)],o.Bz]}),e})();var A=n(2396);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.ez,y,A.C]]}),e})()}}]);